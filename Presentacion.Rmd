---
title: "Relaci√≥n del sedentarismo con problemas auditivos y visuales"
author: "Antonia A√±azco, Daniel Marr√≥n, Jorge Bermejo"
date: "`r Sys.Date()`"
output: 
  ioslides_presentation:
    widescreen: true
    smaller: true
    logo: "IMAGES/logo-universidad-de-burgos.png"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## √çNDICE

- Introducci√≥n
- Objetivos
- M√©todos
- Resultados
- Discusi√≥n


## INTRODUCCI√ìN üìñ

El sedentarismo representa un **serio problema** para la salud p√∫blica, especialmente en Occidente, seg√∫n Rodulfo, J. I. A. (2019) ü§ì [1]. 

Algunos efectos seg√∫n Hu, F. B. (2003) ü§ì [2]: 

‚Ä¢ Hipertensi√≥n 

‚Ä¢ Diabetes tipo II 

‚Ä¢ Obesidad 

Ahora bien, ¬øalguna vez os hab√©is planteado **c√≥mo afecta al sedentarismo a otros aspectos acerca de nuestra salud no tan obvios**? 

## OBJETIVOS

‚Ä¢ Relaci√≥n entre el sedentarismo y el uso de aud√≠fonos por grupos de edad

‚Ä¢ Relaci√≥n entre el sedentarismo y el uso de aud√≠fonos seg√∫n el sexo

‚Ä¢ Relaci√≥n entre el sedentarismo y el uso de gafas por grupos de edad

‚Ä¢ Relaci√≥n entre el sedentarismo y el uso de gafas seg√∫n el sexo


## M√âTODOS (I)
### Importamos las librer√≠as y los datos a usar
```{r, warning = FALSE}
library(tidyjson)
library(rjson)
library(tidyverse)
```
## M√âTODOS (II)
### Importamos las librer√≠as y los datos a usar
```{r}
library(readr)
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
library(ggborderline)
library(ggdark)


audifono_sexo_edad <- fromJSON(file = "DATOS/audif_SexAge_miles.json")
gafas_sexo_edad <- fromJSON(file = "DATOS/gafas_SexAge_miles.json")
imc_sexo_edad <- fromJSON(file = "DATOS/imc_SexAge_miles.json")
sedentarismo_sexo_edad <- fromJSON(file = "DATOS/seden_SexAge_miles.json")
```
## M√âTODOS (III)
### FORMATEO DE DATOS
```{r}
audif_sexo_edad <- audifono_sexo_edad %>% spread_all()
gafas_sexo_edad <- gafas_sexo_edad %>% spread_all()
imc_sexo_edad <- imc_sexo_edad %>% spread_all()
sedent_sexo_edad <- sedentarismo_sexo_edad %>% spread_all()
```
#### Formateamos el conjunto de datos: "imc_SexAge"
```{r}
imc_sexo_edad %>% gather_object %>% json_types %>% count(name,type) 
```
## M√âTODOS (IV)
#### Formateamos el conjunto de datos: "imc_SexAge"
```{r}
imc_SexAge <- imc_sexo_edad %>%
enter_object(Data) %>%
gather_array %>%
spread_all()
imc_SexAge$Sexo <- NA
imc_SexAge$Edad <- NA
imc_SexAge$IMC <- NA
for (i in 1:dim(imc_SexAge)[1]){
  r <- unlist(gregexpr(',', imc_SexAge$Nombre[i]))
  primera_coma <- r[1]
  segunda_coma <- r[2]
  imc_SexAge$Sexo[i] <- substring(imc_SexAge$Nombre[i], 0, primera_coma-1)
  edad <- substring(imc_SexAge$Nombre[i], primera_coma+1, segunda_coma-1)
  if (edad != " TOTAL"){
  edad <- substring(imc_SexAge$Nombre[i], primera_coma+4, primera_coma+12)
  }
  imc_SexAge$Edad[i] <- edad
  imc_SexAge$IMC[i] <- substring(imc_SexAge$Nombre[i], segunda_coma+1)
}
```
## M√âTODOS (V)
#### Formateamos el conjunto de datos: "imc_SexAge"
Algunas aclaraciones al respecto:
```{r}
imc_SexAge %>% gather_object %>% json_types %>% count(name,type) 
```
Este "Code Chunk" nos sirve para saber a qu√© datos hemos de acceder. En particular, se formatear√° los datos de la categor√≠a array (excepto MetaData) En el resultado anterior ya dicho array no se encuentra porque ya lo hemos formateado.
Adem√°s, las funciones unlist(gregexpr()) devuelve el √≠ndice de todas las apariciones de un determinado character en un character de mayor longitud. 
La funci√≥n substring() devuelve el sub-character presente en un character de mayor longitud entre ciertos √≠ndices pasados como argumento.

## M√âTODOS (VI)
### FORMATEO DE DATOS
#### Formateamos el conjunto de datos: "sedent_sexo_edad"
```{r}
sedent_sexo_edad %>% gather_object %>% json_types %>% count(name, type)
```
## M√âTODOS (VII)
### FORMATEO DE DATOS
#### Formateamos el conjunto de datos: "sedent_sexo_edad"
{r}
sedent_SexAge <- sedent_sexo_edad %>% 
enter_object(Data) %>% 
gather_array %>% 
spread_all()
sedent_SexAge$Sexo <- NA
sedent_SexAge$Edad <- NA
sedent_SexAge$Sedentarismo <- NA
for (i in 1:dim(sedent_SexAge)[1]){
  r <- unlist(gregexpr(',', sedent_SexAge$Nombre[i]))
  primera_coma <- r[1]
  segunda_coma <- r[2]
  sedent_SexAge$Sexo[i] <- substring(sedent_SexAge$Nombre[i], 0, primera_coma-1)
  edad <- substring(sedent_SexAge$Nombre[i], primera_coma+1, segunda_coma-1)
  if (edad != " TOTAL"){
  edad <- substring(sedent_SexAge$Nombre[i], primera_coma+4, primera_coma+12)
  }
  sedent_SexAge$Edad[i] <- edad
  sedent_SexAge$Sedentarismo[i] <- substring(sedent_SexAge$Nombre[i], segunda_coma+1)
}

